<!DOCTYPE html>
<html>

<head>
	<meta charset="utf-8" />
	<meta http-equiv="X-UA-Compatible" content="IE=edge">
	<title>学生</title>
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<script src="https://cdn.bootcss.com/vue/2.4.2/vue.min.js"></script>
	<script src="https://cdn.bootcss.com/vue-router/2.7.0/vue-router.min.js"></script>
	<!-- Bootstrap core CSS -->
	<link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.1.3/css/bootstrap.min.css" integrity="sha384-MCw98/SFnGE8fJT3GXwEOngsV7Zt27NXFoaoApmYm81iuXoPkFOJwJ8ERdknLPMO"
	 crossorigin="anonymous">
	 <link href="./images/student/docs.min.css" rel="stylesheet">
	<!-- axios -->
	<script src="https://unpkg.com/axios/dist/axios.min.js"></script>
</head>

<body>
	<div id="student">
		<cnav :s=student></cnav>
		<router-view></router-view>
		<cfooter></cfooter>
	</div>

	<script>
		//nav
		Vue.component('cnav', {
			props: ["s"],
			template: `
			<nav class="navbar navbar-expand-lg navbar-light bg-white shadow-sm">
			<a class="navbar-brand" href="#"><img
				src="../images/student/logo.png" width="200" height="60"
				class="d-inline-block align-top" alt="#"></a>
			<button class="navbar-toggler" type="button" data-toggle="collapse"
				data-target="#navbarSupportedContent"
				aria-controls="navbarSupportedContent" aria-expanded="false"
				aria-label="Toggle navigation">
				<span class="navbar-toggler-icon"></span>
			</button>
			<div class="collapse navbar-collapse" id="navbarSupportedContent">
				<ul class="navbar-nav mr-auto mt-2 mt-lg-0">
					<li class="nav-item"><a class="nav-link text-dark" href="#">首页</a></li>
					<li class="nav-item"><a class="nav-link text-dark"
						href="student.html#/personinfo">个人信息</a></li>
					<li class="nav-item"><a class="nav-link text-dark"
						href="student.html#/choose">学生选课</a></li>
					<li class="nav-item"><a class="nav-link text-dark"
						:href="'student.html#/timetables/'+s.stuId">课表查询</a></li>
					<li class="nav-item"><a class="nav-link text-dark"
						:href="'student.html#/restudy/'+s.stuId">重修报名</a></li>
						<li class="nav-item dropdown"><a
						class="nav-link dropdown-toggle text-dark" href="#" id="navbarDropdown"
						role="button" data-toggle="dropdown" aria-haspopup="true"
						aria-expanded="false"> 课程查询 </a>
						<div class="dropdown-menu"
							aria-labelledby="navbarDropdownMenuLink">
							<a class="dropdown-item" :href="'student.html#/major/'+s.stuId">专业课程</a>
							<div class="dropdown-divider"></div>
							<a class="dropdown-item" :href="'student.html#/main/'+s.stuId">必修课程</a>
							<div class="dropdown-divider"></div>
							<a class="dropdown-item" :href="'student.html#/selec/'+s.stuId">选修课程</a>
						</div></li>
					<li class="nav-item dropdown"><a
						class="nav-link dropdown-toggle text-dark" href="#" id="navbarDropdown"
						role="button" data-toggle="dropdown" aria-haspopup="true"
						aria-expanded="false"> 成绩查询 </a>
						<div class="dropdown-menu"
							aria-labelledby="navbarDropdownMenuLink">
							<a class="dropdown-item" :href="'student.html#/score/'+s.stuId">个人成绩</a>
							<div class="dropdown-divider"></div>
							<a class="dropdown-item" :href="'student.html#/classRank/'+s.stuId">班级排名</a>
							<div class="dropdown-divider"></div>
							<a class="dropdown-item" :href="'student.html#/majorRank/'+s.stuId">专业排名</a>
						</div></li>
				</ul>
				<a class="text-dark " href="/">{{s.stuName}}({{s.stuId}})，退出</a>
			</div>
		</nav>
		`
		})

		//footer
		Vue.component('cfooter', {
			template: `
			<div class="container-fluid   border border-white">
			<footer class="pt-4  pt-md-5 border-top">
				<div class="row">
					<div class="col-12 col-md">
						<img class="mb-2" src="../images/student/code.png" alt="">
						<small class="d-block mb-3 text-muted">&copy; 中南林科大新闻网</small>
					</div>
					<div class="col-6 col-md">
						<ul class="list-unstyled text-small">
							<li><a class="text-muted">地址：湖南省长沙市韶山南路498号</a></li>
							<li><a class="text-muted"> 邮编：410004</a></li>
							<li><a class="text-muted">电话：0731-85623096</a></li>
						</ul>
					</div>
					<div class="col-6 col-md">
						<ul class="list-unstyled text-small">
							<li><a class="text-muted">中南林业科技大学教务处版权所有</a></li>
							<li><a class="text-muted">湘ICP备09017705号</a></li>
							<li><a class="text-muted">湘教Q4_201212_010022</a></li>
						</ul>
					</div>
					<div class="col-6 col-md">
						<ul class="list-unstyled text-small">
							<li><a class="text-muted"
								href="http://www.hep.com.cn/service/xuanshu">高教出版社产品信息检索</a></li>
							<li><a class="text-muted" href="http://www.moe.edu.cn/">国家教育部</a></li>
							<li><a class="text-muted" href="http://www.csuft.edu.cn">中南林业科技大学</a></li>
							<li><a class="text-muted" href="http://zjc.csuft.edu.cn/f">中南林业科技大学招生网</a></li>
						</ul>
					</div>
				</div>
			</footer>
		</div>
		`
		})

		//首页组件
		let firstpage = Vue.component("main", {
			data: function () {
				return {
					tf:false
				}
			},
			methods:{
				test(){
					this.tf=true;
				}
			},
			template: `
		<div>
    	  <div id="carouselExampleIndicators" class="carousel slide" data-ride="carousel">
    	  <ol class="carousel-indicators">
    	    <li data-target="#carouselExampleIndicators" data-slide-to="0" class="active"></li>
    	    <li data-target="#carouselExampleIndicators" data-slide-to="1"></li>
    	    <li data-target="#carouselExampleIndicators" data-slide-to="2"></li>
    	  </ol>
    	  <div class="carousel-inner">
    	    <div class="carousel-item active">
    	      <img class="d-block w-100" src="../images/student/main1.png" alt="First slide">
    	    </div>
    	    <div class="carousel-item">
    	      <img class="d-block w-100" src="../images/student/main2.png" alt="Second slide">
    	    </div>
    	    <div class="carousel-item">
    	      <img class="d-block w-100" src="../images/student/main3.png" alt="Third slide">
    	    </div>
    	  </div>
    	  <a class="carousel-control-prev" href="#carouselExampleIndicators" role="button" data-slide="prev">
    	    <span class="carousel-control-prev-icon" aria-hidden="true"></span>
    	    <span class="sr-only">Previous</span>
    	  </a>
    	  <a class="carousel-control-next" href="#carouselExampleIndicators" role="button" data-slide="next">
    	    <span class="carousel-control-next-icon" aria-hidden="true"></span>
    	    <span class="sr-only">Next</span>
    	  </a>
      </div>
 <div class="container-fluid">
 <main class="bd-masthead" id="content" role="main">
 <div class="container">
   <div class="row align-items-center">
     <div class="col-6 mx-auto col-md-6 order-md-2">
       <img v-if="tf" class="img-fluid mb-3 mb-md-0" src="./images/student/caidan.png" alt="" width="1024" height="860">
     </div>
     <div class="col-md-6 order-md-1 text-center text-md-left pr-md-5">
       <h1 class="mb-3 ">教务处</h1>
       <p class="lead">
        本教务系统是由本校学生Avenge团队完成
       </p>
       <p class="lead mb-4">
   本系统提供了所有的基本功能，由于该团队是第一次做如此大的项目，还存在诸多问题，请各位师生谅解，如有问题，请反馈给我们，我们将及时做出修改，谢谢！
       </p>
       <div class="d-flex flex-column flex-md-row lead mb-3">
       <a href="#" class="btn btn-lg btn-bd-primary mb-3 mb-md-0 mr-md-3" onclick="console.log('恭喜你获得彩蛋！,前100名有娃娃赠送，谢谢支持（请加qq：1261762904）')">开始使用</a>
       <a class="btn btn-lg btn-outline-secondary" @click="test">为我们点赞</a>
       </div>
       <p class="text-muted mb-0">
         Avenge v5.1.3
       </p>
     </div>
   </div>
  

 </div>
</main>
  <!-- Example row of columns -->
  <div class="row">
    <div class="col-12 col-md-4 p-3 p-md-5 bg-light border border-white">
    <!-- Icon by Bytesize https://github.com/danklammer/bytesize-icons -->
    <svg xmlns="http://www.w3.org/2000/svg" focusable="false" width="32" height="32" fill="none" stroke="currentcolor" stroke-width="2" class="text-primary mb-2" viewBox="0 0 32 32" stroke-linecap="round" stroke-linejoin="round"><title>Import icon</title><path d="M28 22v8H4v-8M16 4v20m-8-8l8 8 8-8"/></svg>

    <h3>关于我们</h3>
    <p>中南林业科技大学的前身之一是成立于1958年的本科院校湖南林学院。是国家林业局与湖南省人民政府共建的省部共建大学、省属重点大学、中西部高校基础能力建设工程、卓越农林人才教育培养计划、湖南省2011计划建设高校，建有湖南北罗霄国家森林公园、湖南绿色发展研究院。</p>

<figure class="highlight mt-0 mb-3 py-2"><pre><code class="language-sh" data-lang="sh">现任校长 <span class="nb">廖小平 </span></code></pre></figure>

<figure class="highlight mt-0 mb-3 py-2"><pre><code class="language-sh" data-lang="sh">校    训 <span class="nb">求是求新 </span>  <span class="nb">树木树人</span></code></pre></figure>

    <hr class="half-rule">
    <a class="btn btn-outline-primary" href="https://baike.baidu.com/item/%E4%B8%AD%E5%8D%97%E6%9E%97%E4%B8%9A%E7%A7%91%E6%8A%80%E5%A4%A7%E5%AD%A6/163092?fromtitle=%E6%9E%97%E7%A7%91%E5%A4%A7&fromid=15999934&fr=aladdin">想知道更多</a>
  </div>
    
  <div class="col-12 col-md-4 p-3 p-md-5 bg-light border border-white">
  <!-- Icon by Bytesize https://github.com/danklammer/bytesize-icons -->
  <svg xmlns="http://www.w3.org/2000/svg" focusable="false" width="32" height="32" fill="none" stroke="currentcolor" stroke-width="2" class="text-primary mb-2" viewBox="0 0 32 32" stroke-linecap="round" stroke-linejoin="round"><title>Download icon</title><path d="M9 22c-9 1-8-10 0-9C6 2 23 2 22 10c10-3 10 13 1 12m-12 4l5 4 5-4m-5-10v14"/></svg>

  <h3>相关网址</h3>
  <p></p>

<h5>本校官网</h5>
<figure class="highlight mt-0 mb-3 py-2"><pre><code class="language-html" data-lang="html"><span class="nt">&lt;URL</span> <span class="na">href=</span><span class="s"><a href="http://www.csuft.edu.cn/">"http://www.csuft.edu.cn/"</a></span> <span class="s">中南林业科技大学</span> <span class="nt">&gt;</span></code></pre></figure>

<h5>其他</h5>
<figure class="highlight mt-0 mb-3 py-2"><pre><code class="language-html" data-lang="html"><span class="nt">&lt;URL </span><span class="na">href=</span><span class="s"><a href="http://www.csfxgw.com/">"http://www.csfxgw.com/"</span></a> <span class="s">中南林业科技大学学工部</span> <span class="nt">&gt;</span>
<span class="nt">&lt;URL </span><span class="na">href=</span><span class="s"><a href="http://cwc.csuft.edu.cn/">"http://cwc.csuft.edu.cn/"</span></a> <span class="s">中南林业科技大学财务处</span> <span class="nt">&gt;</span>
<span class="nt">&lt;URL </span><span class="na">href=</span><span class="s"><a href="http://zs.csuft.edu.cn/f">"http://zs.csuft.edu.cn/f"</span></a> <span class="s">中南林业科技大学招生办</span> <span class="nt">&gt;</span></code></pre></figure>
  <hr class="half-rule">
  <a class="btn btn-outline-primary" href="/docs/4.1/layout/overview/">更多链接</a>
</div>

    
    <div class="col-12 col-md-4 p-3 p-md-5 bg-light border border-white">
    <!-- Icon by Bytesize https://github.com/danklammer/bytesize-icons -->
    <svg xmlns="http://www.w3.org/2000/svg" focusable="false" width="32" height="32" fill="none" stroke="currentcolor" stroke-width="2" class="text-primary mb-2" viewBox="0 0 32 32" stroke-linecap="round" stroke-linejoin="round"><title>Lightning icon</title><path d="M18 13l8-11L8 13l6 6-8 11 18-11z"/></svg>

    <h3>每日一报</h3>
    <p>
    学校纪念建党97年暨“七一”表彰大会于6月29日上午在雅韵楼召开,教务处党支部获评为学校2017-2018年度先进党支部
    </p>
    <img class="img-fluid mt-3 mx-auto" src="./images/student/bootstrap-themes1.png" alt="Bootstrap Themes" width="1024" height="388">
    <hr class="half-rule">
    <a href="https://themes.getbootstrap.com" class="btn btn-outline-primary">深入了解</a>
  </div>
    
    
    </div>
  </div>
</div> <!-- /container -->
</div>
    `});

		//个人信息组件
		let personinfo = Vue.component('information', {
			data: function () {
				return {
					s: {},
					prepw: null,
					newpw: null,
					againnewpw: null,
				}
			},
			methods: {
				submit() {
					if (this.newpw === this.againnewpw) {
						axios.post("/stu/uppw", {
							'id': this.s.stuId, 'prePW': this.prepw, 'newPW': this.newpw
						})
							.then((resp) => {
								if (resp.data) { alert("密码修改成功"); }
								else { alert("原密码错误"); }
							})
							.catch((resp) => { console.log("失败") });
					}
					else {
						alert("两次密码不匹配");

					}
				}
			},
			mounted() {
				axios.get("/stu")
					.then((resp) => { this.s = resp.data; })
					.catch((resp) => { console.log("失败") })
			},
			template: `
      <div class="container mt-4 mb-5">
      <div class="row">
      <div class="col-2">
      <img class="d-block w-100 mt-5" :src="s.stuPic" alt="First slide">
	  </div>
      <div class="col-8">
        <ul>
          <li class="list-group-item "><img src="./images/student/per6.png" width="30" height="30">学号：{{s.stuId}}</li>
          <li class="list-group-item "><img src="./images/student/per4.png" width="30" height="30">姓名：{{s.stuName}}</li>
          <li class="list-group-item "><img src="./images/student/per1.png" width="30" height="30">学院：{{s.stuCollege}}	</li>
          <li class="list-group-item "><img src="./images/student/per2.png" width="30" height="30">专业：{{s.stuMajor}}</li>
          <li class="list-group-item "><img src="./images/student/per5.png" width="30" height="30">班级：{{s.stuClazz}}</li>
          <li class="list-group-item "><img src="./images/student/per3.png" width="30" height="30">籍贯：{{s.stuAddress}}</li>
          <li class="list-group-item "><img src="./images/student/per7.png" width="30" height="30">电话：{{s.stuPhone}}</li>
          <li class="list-group-item "><img src="./images/student/per8.png" width="30" height="30">邮箱：{{s.stuEmail}}</li>
        </ul>
        </div>
        </div>
        <div class="row">
        <div class="col-4 offset-5 offset-4">
        <!-- Button trigger modal -->
        <button type="button" class="btn btn-primary ml-5" data-toggle="modal" data-target="#exampleModal">
          修改密码
        </button>
        </div>
        </div>
        <!-- Modal -->
        <div class="modal fade" id="exampleModal" tabindex="-1" role="dialog" aria-labelledby="exampleModalLabel" aria-hidden="true">
          <div class="modal-dialog" role="document">
            <div class="modal-content">
              <div class="modal-header">
                <h5 class="modal-title" id="exampleModalLabel">修改密码</h5>
                <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                  <span aria-hidden="true">&times;</span>
                </button>
              </div>
              <div class="modal-body">

              <div class="form-group">
              <label for="exampleInputPassword1">原密码</label>
              <input type="password" class="form-control" placeholder="Password" v-model="prepw">
            </div>
              <div class="form-group">
                <label for="exampleInputPassword1">新密码</label>
                <input type="password" class="form-control"  placeholder="Password" v-model="newpw">
              </div>
              <div class="form-group">
              <label for="exampleInputPassword1">再次确认</label>
              <input type="password" class="form-control"  placeholder="Password" v-model="againnewpw">
            </div>
              
              </div>
              <div class="modal-footer">
              <button type="button" class="btn btn-secondary" data-dismiss="modal">关闭</button>
              <button type="button" class="btn btn-primary" data-dismiss="modal" @click="submit">提交</button>
            </div>
            </div>
          </div>
        </div>
      </div>
      `});

		//选课组件
		let choose = Vue.component('choose', {
			data: function () {
				return {
					scs: undefined,
					selected: "",
					tf: false,
				}
			},
			methods: {
				selectCourse() {
					axios.post("stu/allSelectCourse", {
						'time': this.selected
					}).then((resp) => { this.scs = resp.data; this.tf = true; })
						.catch((resp) => { console.log("失败") })
				},
				select() {
					alert("选课成功");
					window.location = '/student.html';
				}
			},
			mounted() {

				this.tf = false;

			},
			template: `
    	  <div class="container mt-4  mb-5">
    	  <table class="table table-striped" v-if="tf">
    	    <thead>
    	      <tr>
    	        <th scope="col">序号</th>
    	        <th scope="col">课程</th>
    	        <th scope="col">学分</th>
    	        <th scope="col">学时</th>
    	        <th scope="col">性质</th>
    	        <th scope="col">老师</th>
    	        <th scope="col">职称</th>
    	        <th scope="col">学期</th>
    	        <th scope="col">提交</th>
    	      </tr>
    	    </thead>
    	    <tbody>
    	      <tr v-for="(sc,key) in scs" :key="key">
    	        <th scope="row">{{key}}</th>
    	        <td>{{sc.scCourName}}</td>
    	        <td>{{sc.scCourCredit}}</td>
    	        <td>{{sc.scCourPeriod}}</td>
    	        <td>{{sc.scCourNature}}</td>
    	        <td>{{sc.scTeacName}}</td>
    	        <td>{{sc.scTeacTitle}}</td>
    	        <td>{{sc.scSubTime}}</td>
    	        <button class="btn btn-primary mt-1" type="submit" @click="select">选课</button>
    	      </tr>
    	    </tbody>
    	  </table>
    	  <div class="row" v-if="!tf"><div class="col-4 offset-4">
    	    <div class="form-group">
    	      <label for="exampleFormControlSelect1">通过学期查找</label>
    	      <select class="form-control" id="exampleFormControlSelect1" v-model="selected">
    	      <option disabled value="">请选择</option>
    	        <option >第一学期</option>
    	        <option >第二学期</option>
    	        <option >第三学期</option>
    	        <option >第四学期</option>
    	      </select>
    	    </div>
    	    <button class="btn btn-primary" type="submit" @click="selectCourse">查找</button>
    	  </div></div>

    	        </div>
      `})

		//课程表组件
		let timetables = Vue.component('time-tables', {
			data: function () {
				return {
					schedules: undefined,
					selected: "",
					tf: false,
					week: "",
					a:"1",
				}
			},
			methods: {
				sche() {
					axios.post("stu/schedule", {
						'id': this.$route.params.id, 'time': this.selected, 'week': this.week
					}).then((resp) => { this.schedules = resp.data; this.tf = true; })
						.catch((resp) => { console.log("失败") })
				},
				info(day,part){
					axios.post("stu/scheduleInfo", {
						'id': this.$route.params.id, 'time': this.selected, 'week': this.week,'day':day,'part':part
					}).then((resp) => { this.a = resp.data; console.log(resp.data); })
						.catch((resp) => { console.log("失败") })
				}
			},
			mounted() {

				this.tf = false;

			},
			template: `
    	  <div class="container mt-4  mb-5">
<div class="row"><div class="col-12">
			<table class="table table-hover" v-if="tf">
  <thead>
    <tr>
      <th scope="col">第{{week}}周</th>
      <th scope="col">星期一</th>
      <th scope="col">星期二</th>
      <th scope="col">星期三</th>
			<th scope="col">星期四</th>
      <th scope="col">星期五</th>
      <th scope="col">星期六</th>
			<th scope="col">星期日</th>
    </tr>
  </thead>
  <tbody>
    <tr v-for="(sche,key) in schedules" :key="key">
      <th scope="row" >{{sche.part}}</th>
      <td><button type="button" class="btn  btn-outline-primary" v-if="sche.monday!=null" @click="info(1,sche.part)" data-toggle="modal" data-target="#exampleModal">{{sche.monday}}</button></td>
      <td><button type="button" class="btn  btn-outline-primary" v-if="sche.tuesday!=null"  @click="info(2,sche.part)" data-toggle="modal" data-target="#exampleModal">{{sche.tuesday}}</button></td>
      <td><button type="button" class="btn  btn-outline-primary" v-if="sche.wednesday!=null"  @click="info(3,sche.part)" data-toggle="modal" data-target="#exampleModal">{{sche.wednesday}}</button></td>
	  <td><button type="button" class="btn  btn-outline-primary" v-if="sche.thursday!=null"  @click="info(4,sche.part)" data-toggle="modal" data-target="#exampleModal">{{sche.thursday}}</button></td>
      <td><button type="button" class="btn  btn-outline-primary" v-if="sche.friday!=null"  @click="info(5,sche.part)" data-toggle="modal" data-target="#exampleModal">{{sche.friday}}</button></td>
      <td><button type="button" class="btn  btn-outline-primary" v-if="sche.saturday!=null"  @click="info(6,sche.part)" data-toggle="modal" data-target="#exampleModal">{{sche.saturday}}</button></td>
	  <td><button type="button" class="btn  btn-outline-primary" v-if="sche.sunday!=null"  @click="info(7,sche.part)" data-toggle="modal" data-target="#exampleModal">{{sche.sunday}}</button></td>
    </tr>
  </tbody>
</table>
</div></div>
<!-- Modal -->
<div class="modal fade" id="exampleModal" tabindex="-1" role="dialog" aria-labelledby="exampleModalLabel" aria-hidden="true">
  <div class="modal-dialog" role="document">
    <div class="modal-content">
      <div class="modal-header">
        <h5 class="modal-title" id="exampleModalLabel">{{a.courName}}</h5>
        <button type="button" class="close" data-dismiss="modal" aria-label="Close">
          <span aria-hidden="true">&times;</span>
        </button>
      </div>
      <div class="modal-body">
					<div class="alert alert-light" role="alert"> <img src="./images/student/1.png" width="30" height="30">教师：{{a.site}}</div>
					<div class="alert alert-light" role="alert"><img src="./images/student/2.png" width="30" height="30">周数：{{a.week}}</div>
					<div class="alert alert-light" role="alert"><img src="./images/student/3.png" width="30" height="30">节数：{{a.part}}</div>
					<div class="alert alert-light" role="alert"><img src="./images/student/4.png" width="30" height="30">老师：{{a.teacName}}</div>
      </div>
      <div class="modal-footer">
        <button type="button" class="btn btn-primary" data-dismiss="modal">Close</button>
      </div>
    </div>
  </div>
</div>

    	<div class="row" v-if="!tf"><div class="col-4 offset-4">
    	  <div class="form-group">
    	    <label for="exampleFormControlSelect1">学期</label>
    	    <select class="form-control" id="exampleFormControlSelect1" v-model="selected">
    	    <option disabled value="">请选择</option>
    	      <option >第一学期</option>
    	      <option >第二学期</option>
    	      <option >第三学期</option>
    	      <option >第四学期</option>
    	    </select>
    	  </div>
    	  <div class="form-group">
  	    <label for="exampleFormControlSelect1">周数</label>
  	    <select class="form-control" id="exampleFormControlSelect1" v-model="week" >
  	    <option disabled value="">请选择</option>
  	      <option :value="i" v-for="i,index in 30" :key="index">第{{i}}周</option>
  	    </select>
  	  </div>

    	  <button class="btn btn-primary" type="submit" @click="sche">查找</button>
    	</div></div></div>
  `});

		//重修报名组件
		let restudy = Vue.component('restudy', {
			data() {
				return {
					failCourse: [],
					reCourse: [],
				}

			},
			methods: {
				apply() {
					alert("报名成功，请及时缴费");
					window.location = "/student.html";
				},
			},
			mounted() {
				axios.get("stu/failCourse/" + this.$route.params.id)
					.then((resp) => { this.failCourse = resp.data; })
					.catch((resp) => console.log("失败"));
				axios.get("stu/againCourse/" + this.$route.params.id)
					.then((resp) => { this.reCourse = resp.data; })
					.catch((resp) => console.log("失败"));
			},
			template: `
        <div class="container">
    	  <h2 class="mt-3"><span class="badge badge-secondary">挂科情况</span></h2>
    	<table class="table table-striped" >
    	  <thead>
    	    <tr>
    	    <th scope="col">序号</th>
    	      <th scope="col">课程名称</th>
    	      <th scope="col">课程性质</th>
    	      <th scope="col">授课老师</th>
    	      <th scope="col">开课时间</th>
    	      <th scope="col">成绩</th>
    	      <th scope="col">结果</th>
    	    </tr>
    	  </thead>
    	  <tbody>
    	    <tr v-for="(f,key,index) in failCourse" :key="key">
    	    <th scope="row">{{key}}</th>
    	    <td>{{f.courName}}</td>
    	      <td>{{f.courNature}}</td>
    	      <td>{{f.teacName}}</td>
    	      <td>{{f.subTime}}</td>
    	      <td>{{f.score}}</td>
    	      <td class="text-danger">{{f.judge}}</td>
    	    </tr>
    	  </tbody>
    	</table>
    	 <h2 class="mt-3"><span class="badge badge-secondary">未重修课程</span></h2>
     	<table class="table table-striped" >
  	  <thead>
  	    <tr>
  	    <th scope="col">序号</th>
  	      <th scope="col">课程名称</th>
  	      <th scope="col">报名</th>
  	    </tr>
  	  </thead>
  	  <tbody>
  	    <tr v-for="(r,key,index) in reCourse" :key="key">
  	    <th scope="row">{{key}}</th>
  	    <td>{{r}}</td>
  	  <td><button class="btn btn-primary" @click="apply" >报名</button></td>
  	    </tr>
  	  </tbody>
  	</table>

    	</div>
      `});

		//专业课程
		let major = Vue.component('major', {
			data: function () {
				return {
					mcs: undefined,
					selected: "",
					tf: false,
				}
			},
			methods: {
				submit() {
					axios.post("stu/majorCourse", {
						'id': this.$route.params.id, 'time': this.selected
					}).then((resp) => { this.mcs = resp.data; this.tf = true; })
						.catch((resp) => { console.log("失败") })
				},
			},
			mounted() {
				this.tf = false;

			},
			template: `
    	  <div class="container mt-4  mb-5">
    	  <table class="table table-striped" v-if="tf">
    	    <thead>
    	      <tr>
    	        <th scope="col">序号</th>
    	        <th scope="col">课程</th>
    	        <th scope="col">性质</th>
    	        <th scope="col">学分</th>
    	        <th scope="col">学时</th>
    	        <th scope="col">学期</th>
    	      </tr>
    	    </thead>
    	    <tbody>
    	      <tr v-for="(mc,key) in mcs" :key="key">
    	        <th scope="row">{{key}}</th>
    	        <td>{{mc.mcCourName}}</td>
    	        <td>{{mc.mcCourNature}}</td>
    	        <td>{{mc.mcCourCredit}}</td>
    	        <td>{{mc.mcCourPeriod}}</td>
    	        <td>{{mc.mcSubTime}}</td>
    	      </tr>
    	    </tbody>
    	  </table>
    	  <div class="row" v-if="!tf"><div class="col-4 offset-4">
    	    <div class="form-group">
    	      <label for="exampleFormControlSelect1">通过学期查找</label>
    	      <select class="form-control" id="exampleFormControlSelect1" v-model="selected">
    	      <option disabled value="">请选择</option>
    	        <option >第一学期</option>
    	        <option >第二学期</option>
    	        <option >第三学期</option>
    	        <option >第四学期</option>
    	      </select>
    	    </div>
    	    <button class="btn btn-primary" type="submit" @click="submit">查找</button>
    	  </div></div>
    	        </div>
      `});

		//必修课程
		let main = Vue.component('main', {
			data: function () {
				return {
					mcs: undefined,
					selected: "",
					tf: false,
				}
			},
			methods: {
				submit() {
					axios.post("stu/mainCourse", {
						'id': this.$route.params.id, 'time': this.selected
					}).then((resp) => { this.mcs = resp.data; this.tf = true; })
						.catch((resp) => { console.log("失败") })
				},
			},
			mounted() {
				this.tf = false;

			},
			template: `
    	  <div class="container mt-4  mb-5">
    	  <table class="table table-striped" v-if="tf">
    	    <thead>
    	      <tr>
    	        <th scope="col">序号</th>
    	        <th scope="col">课程</th>
    	        <th scope="col">性质</th>
    	        <th scope="col">学分</th>
    	        <th scope="col">学时</th>
    	        <th scope="col">学期</th>
    	        <th scope="col">老师</th>
    	        <th scope="col">职称</th>
    	      </tr>
    	    </thead>
    	    <tbody>
    	      <tr v-for="(mc,key) in mcs" :key="key">
    	        <th scope="row">{{key}}</th>
    	        <td>{{mc.mcCourName}}</td>
    	        <td>{{mc.mcCourNature}}</td>
    	        <td>{{mc.mcCourCredit}}</td>
    	        <td>{{mc.mcCourPeriod}}</td>
    	        <td>{{mc.mcSubTime}}</td>
    	        <td>{{mc.mcTeacName}}</td>
    	        <td>{{mc.mcTeacTitle}}</td>
    	      </tr>
    	    </tbody>
    	  </table>
    	  <div class="row" v-if="!tf"><div class="col-4 offset-4">
    	    <div class="form-group">
    	      <label for="exampleFormControlSelect1">通过学期查找</label>
    	      <select class="form-control" id="exampleFormControlSelect1" v-model="selected">
    	      <option disabled value="">请选择</option>
    	        <option >第一学期</option>
    	        <option >第二学期</option>
    	        <option >第三学期</option>
    	        <option >第四学期</option>
    	      </select>
    	    </div>
    	    <button class="btn btn-primary" type="submit" @click="submit">查找</button>
    	  </div></div>
    	        </div>
      `})

		//选修课程
		let selec = Vue.component('selec', {
			data: function () {
				return {
					scs: undefined,
					selected: "",
					tf: false,
				}
			},
			methods: {
				submit() {
					axios.post("stu/selectCourse", {
						'id': this.$route.params.id, 'time': this.selected
					}).then((resp) => { this.scs = resp.data; this.tf = true; })
						.catch((resp) => { console.log("失败") })
				},
			},
			mounted() {
				this.tf = false;

			},
			template: `
    	  <div class="container mt-4  mb-5">
    	  <table class="table table-striped" v-if="tf">
    	    <thead>
    	      <tr>
    	        <th scope="col">序号</th>
    	        <th scope="col">课程</th>
    	        <th scope="col">性质</th>
    	        <th scope="col">学分</th>
    	        <th scope="col">学时</th>
    	        <th scope="col">学期</th>
    	        <th scope="col">老师</th>
    	        <th scope="col">职称</th>
    	      </tr>
    	    </thead>
    	    <tbody>
    	      <tr v-for="(sc,key) in scs" :key="key">
    	        <th scope="row">{{key}}</th>
    	        <td>{{sc.scCourName}}</td>
    	        <td>{{sc.scCourNature}}</td>
    	        <td>{{sc.scCourCredit}}</td>
    	        <td>{{sc.scCourPeriod}}</td>
    	        <td>{{sc.scSubTime}}</td>
    	        <td>{{sc.scTeacName}}</td>
    	        <td>{{sc.scTeacTitle}}</td>
    	      </tr>
    	    </tbody>
    	  </table>
    	  <div class="row" v-if="!tf"><div class="col-4 offset-4">
    	    <div class="form-group">
    	      <label for="exampleFormControlSelect1">通过学期查找</label>
    	      <select class="form-control" id="exampleFormControlSelect1" v-model="selected">
    	      <option disabled value="">请选择</option>
    	        <option >第一学期</option>
    	        <option >第二学期</option>
    	        <option >第三学期</option>
    	        <option >第四学期</option>
    	      </select>
    	    </div>
    	    <button class="btn btn-primary" type="submit" @click="submit">查找</button>
    	  </div></div>
    	        </div>
      `})

		//成绩组件
		let score = Vue.component('score-test', {

			data: function () {
				return {
					grades: undefined,
					selected: "",
					tf: false,
				}
			},
			methods: {
				gradeByTime() {
					axios.post("stu/grade", {
						'id': this.$route.params.id, 'time': this.selected
					}).then((resp) => { this.grades = resp.data; this.tf = true; })
						.catch((resp) => { console.log("失败") })
				},
			},
			mounted() {

				this.tf = false;

			},
			template: `
      <div class="container mt-4  mb-5">
<table class="table table-striped" v-if="tf">
  <thead>
    <tr>
      <th scope="col">序号</th>
      <th scope="col">课程名称</th>
      <th scope="col">课程性质</th>
      <th scope="col">授课老师</th>
      <th scope="col">开课时间</th>
      <th scope="col">学分</th>
      <th scope="col">成绩</th>
      <th scope="col">绩点</th>
      <th scope="col">过否</th>
    </tr>
  </thead>
  <tbody>
    <tr v-for="(grade,key) in grades" :key="key">
      <th scope="row">{{key}}</th>
      <td>{{grade.courName}}</td>
      <td>{{grade.courNature}}</td>
      <td>{{grade.teacName}}</td>
      <td>{{grade.subTime}}</td>
      <td>{{grade.courCredit}}</td>
      <td>{{grade.score}}</td>
      <td>{{grade.point}}</td>
      <td v-bind:class="[grade.judge=='没过' ? 'text-danger' : '',grade.judge=='重修过' ? 'text-danger' : '']" >{{grade.judge}}</td>
    </tr>
  </tbody>
</table>
<div class="row" v-if="!tf"><div class="col-4 offset-4">
  <div class="form-group">
    <label for="exampleFormControlSelect1">通过学期查找</label>
    <select class="form-control" id="exampleFormControlSelect1" v-model="selected">
    <option disabled value="">请选择</option>
      <option >第一学期</option>
      <option >第二学期</option>
      <option >第三学期</option>
      <option >第四学期</option>
    </select>
  </div>
  <button class="btn btn-primary" type="submit" @click="gradeByTime">查找</button>
</div></div>

      </div>
      `});

		//班级排名
		let classRank = Vue.component('rank-class', {

			data: function () {
				return {
					ranks: {},
					tf: false,
					selected: ""
				}
			},
			methods: {
				classRank() {
					axios.post("stu/classRank", {
						'id': this.$route.params.id, 'time': this.selected
					}).then((resp) => { this.ranks = resp.data; this.tf = true; })
						.catch((resp) => { console.log("失败") })
				}
			},
			mounted() {

			},
			template: `
      <div class="container mt-4  mb-5">
    	  <table class="table table-striped" v-if="tf">
    	  <thead>
  	    <tr>
  	      <th scope="col">班级排名</th>
  	      <th scope="col">总分（绩点×学分）</th>
  	      <th scope="col">学期</th>
  	    <th scope="col">届</th>
  	    </tr>
  	  </thead>
  	  <tbody>
  	    <tr >
  	      <td>{{ranks.rank}}</td>
  	      <td>{{ranks.sum}}</td>
  	      <td>{{ranks.subTime}}</td>
  	    <td>{{ranks.period}}</td>
  	    </tr>
  	  </tbody>
  	</table>

    	  <div class="row" v-if="!tf"><div class="col-4 offset-4">
    	  <div class="form-group">
    	    <label for="exampleFormControlSelect1">通过学期查找</label>
    	    <select class="form-control" id="exampleFormControlSelect1" v-model="selected">
    	    <option disabled value="">请选择</option>
    	      <option >第一学期</option>
    	      <option >第二学期</option>
    	      <option >第三学期</option>
    	      <option >第四学期</option>
    	    </select>
    	  </div>
    	  <button class="btn btn-primary" type="submit" @click="classRank">查找</button>
    	</div></div>

      </div>
      `});

		//专业排名
		let majorRank = Vue.component('rank-major', {

			data: function () {
				return {
					ranks: {},
					tf: false,
					selected: ""
				}
			},
			methods: {
				majorRank() {
					axios.post("stu/majorRank", {
						'id': this.$route.params.id, 'time': this.selected
					}).then((resp) => { this.ranks = resp.data; this.tf = true; })
						.catch((resp) => { console.log("失败") })
				}
			},
			mounted() {

			},
			template: `
      <div class="container mt-4  mb-5">
    	  <table class="table table-striped" v-if="tf">
    	  <thead>
  	    <tr>
  	      <th scope="col">专业排名</th>
  	      <th scope="col">总分（绩点×学分）</th>
  	      <th scope="col">学期</th>
  	    <th scope="col">届</th>
  	    </tr>
  	  </thead>
  	  <tbody>
  	    <tr >
  	      <td>{{ranks.rank}}</td>
  	      <td>{{ranks.sum}}</td>
  	      <td>{{ranks.subTime}}</td>
  	    <td>{{ranks.period}}</td>
  	    </tr>
  	  </tbody>
  	</table>

    	  <div class="row" v-if="!tf"><div class="col-4 offset-4">
    	  <div class="form-group">
    	    <label for="exampleFormControlSelect1">通过学期查找</label>
    	    <select class="form-control" id="exampleFormControlSelect1" v-model="selected">
    	    <option disabled value="">请选择</option>
    	      <option >第一学期</option>
    	      <option >第二学期</option>
    	      <option >第三学期</option>
    	      <option >第四学期</option>
    	    </select>
    	  </div>
    	  <button class="btn btn-primary" type="submit" @click="majorRank">查找</button>
    	</div></div>

      </div>
      `});

		//定义路由路径
		const routes = [
			//首页
			{ path: '*', component: firstpage },

			//个人信息
			{ path: '/personinfo', component: personinfo },

			//学生选课
			{ path: '/choose', component: choose },

			//查询课表
			{ path: '/timetables/:id', component: timetables },

			//重修报名
			{ path: '/restudy/:id', component: restudy },

			//专业课程
			{ path: '/major/:id', component: major },

			//主修课程
			{ path: '/main/:id', component: main },

			//选修课程
			{ path: '/selec/:id', component: selec },

			//查成绩
			{ path: '/score/:id', component: score },

			//班级排名
			{ path: '/classRank/:id', component: classRank },

			//专业排名
			{ path: '/majorRank/:id', component: majorRank }
		];

		//加载路由
		const router = new VueRouter({
			routes
		});

		//启动路由
		const app = new Vue({
			el: '#student',
			data: {
				student: {},
			},
			methods: {
			},
			mounted() {
				axios.get("/stu")
					.then((resp) => { this.student = resp.data; })
					.catch((resp) => { console.log("失败") })
			},
			router
		});
	</script>

	<script src="https://code.jquery.com/jquery-3.3.1.slim.min.js" integrity="sha384-q8i/X+965DzO0rT7abK41JStQIAqVgRVzpbzo5smXKp4YfRvH+8abtTE1Pi6jizo"
	 crossorigin="anonymous"></script>
	<script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.14.3/umd/popper.min.js" integrity="sha384-ZMP7rVo3mIykV+2+9J3UJ46jBk0WLaUAdn689aCwoqbBJiSnjAK/l8WvCWPIPm49"
	 crossorigin="anonymous"></script>
	<script src="https://stackpath.bootstrapcdn.com/bootstrap/4.1.3/js/bootstrap.min.js" integrity="sha384-ChfqqxuZUCnJSK3+MXmPNIyE6ZbWh2IMqE241rYiqJxyMiZ6OW/JmZQ5stwEULTy"
	 crossorigin="anonymous"></script>
</body>

</html>