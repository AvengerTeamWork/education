<!DOCTYPE html>
<html>

<head>
	<meta charset="utf-8" />
	<meta http-equiv="X-UA-Compatible" content="IE=edge">
	<title>学生</title>
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<script src="https://cdn.bootcss.com/vue/2.4.2/vue.min.js"></script>
	<script src="https://cdn.bootcss.com/vue-router/2.7.0/vue-router.min.js"></script>
	<!-- Bootstrap core CSS -->
	<link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.1.3/css/bootstrap.min.css" integrity="sha384-MCw98/SFnGE8fJT3GXwEOngsV7Zt27NXFoaoApmYm81iuXoPkFOJwJ8ERdknLPMO"
	 crossorigin="anonymous">
	<!-- axios -->
	<script src="https://unpkg.com/axios/dist/axios.min.js"></script>
</head>

<body>
	<div id="student">
		<cnav :s=student></cnav>
		<router-view></router-view>
		<cfooter></cfooter>
	</div>

	<script>
		//nav
		Vue.component('cnav', {
			props: ["s"],
			template: `
			<nav class="navbar navbar-expand-lg navbar-light bg-white shadow-sm">
			<a class="navbar-brand" href="#"><img
				src="../images/student/logo.png" width="200" height="60"
				class="d-inline-block align-top" alt="#"></a>
			<button class="navbar-toggler" type="button" data-toggle="collapse"
				data-target="#navbarSupportedContent"
				aria-controls="navbarSupportedContent" aria-expanded="false"
				aria-label="Toggle navigation">
				<span class="navbar-toggler-icon"></span>
			</button>
			<div class="collapse navbar-collapse" id="navbarSupportedContent">
				<ul class="navbar-nav mr-auto mt-2 mt-lg-0">
					<li class="nav-item"><a class="nav-link text-dark" href="#">首页</a></li>
					<li class="nav-item"><a class="nav-link text-dark"
						href="student.html#/personinfo">个人信息</a></li>
					<li class="nav-item"><a class="nav-link text-dark"
						href="student.html#/choose">学生选课</a></li>
					<li class="nav-item"><a class="nav-link text-dark"
						:href="'student.html#/timetables/'+s.stuId">课表查询</a></li>
					<li class="nav-item"><a class="nav-link text-dark"
						:href="'student.html#/restudy/'+s.stuId">重修报名</a></li>
						<li class="nav-item dropdown"><a
						class="nav-link dropdown-toggle text-dark" href="#" id="navbarDropdown"
						role="button" data-toggle="dropdown" aria-haspopup="true"
						aria-expanded="false"> 课程查询 </a>
						<div class="dropdown-menu"
							aria-labelledby="navbarDropdownMenuLink">
							<a class="dropdown-item" :href="'student.html#/major/'+s.stuId">专业课程</a>
							<div class="dropdown-divider"></div>
							<a class="dropdown-item" :href="'student.html#/main/'+s.stuId">必修课程</a>
							<div class="dropdown-divider"></div>
							<a class="dropdown-item" :href="'student.html#/selec/'+s.stuId">选修课程</a>
						</div></li>
					<li class="nav-item dropdown"><a
						class="nav-link dropdown-toggle text-dark" href="#" id="navbarDropdown"
						role="button" data-toggle="dropdown" aria-haspopup="true"
						aria-expanded="false"> 成绩查询 </a>
						<div class="dropdown-menu"
							aria-labelledby="navbarDropdownMenuLink">
							<a class="dropdown-item" :href="'student.html#/score/'+s.stuId">个人成绩</a>
							<div class="dropdown-divider"></div>
							<a class="dropdown-item" :href="'student.html#/classRank/'+s.stuId">班级排名</a>
							<div class="dropdown-divider"></div>
							<a class="dropdown-item" :href="'student.html#/majorRank/'+s.stuId">专业排名</a>
						</div></li>
				</ul>
				<a class="text-dark " href="/">{{s.stuName}}({{s.stuId}})，退出</a>
			</div>
		</nav>
		`
		})

		//footer
		Vue.component('cfooter', {
			template: `
			<div class="container mt-4">
			<footer class="pt-4 mt-md-5 pt-md-5 border-top">
				<div class="row">
					<div class="col-12 col-md">
						<img class="mb-2" src="../images/student/code.png" alt="">
						<small class="d-block mb-3 text-muted">&copy; 中南林科大新闻网</small>
					</div>
					<div class="col-6 col-md">
						<ul class="list-unstyled text-small">
							<li><a class="text-muted">地址：湖南省长沙市韶山南路498号</a></li>
							<li><a class="text-muted"> 邮编：410004</a></li>
							<li><a class="text-muted">电话：0731-85623096</a></li>
						</ul>
					</div>
					<div class="col-6 col-md">
						<ul class="list-unstyled text-small">
							<li><a class="text-muted">中南林业科技大学教务处版权所有</a></li>
							<li><a class="text-muted">湘ICP备09017705号</a></li>
							<li><a class="text-muted">湘教Q4_201212_010022</a></li>
						</ul>
					</div>
					<div class="col-6 col-md">
						<ul class="list-unstyled text-small">
							<li><a class="text-muted"
								href="http://www.hep.com.cn/service/xuanshu">高教出版社产品信息检索</a></li>
							<li><a class="text-muted" href="http://www.moe.edu.cn/">国家教育部</a></li>
							<li><a class="text-muted" href="http://www.csuft.edu.cn">中南林业科技大学</a></li>
							<li><a class="text-muted" href="http://zjc.csuft.edu.cn/f">中南林业科技大学招生网</a></li>
						</ul>
					</div>
				</div>
			</footer>
		</div>
		`
		})

		//首页组件
		let firstpage = Vue.component("main", {
			template: `
		<div>
    	  <div id="carouselExampleIndicators" class="carousel slide" data-ride="carousel">
    	  <ol class="carousel-indicators">
    	    <li data-target="#carouselExampleIndicators" data-slide-to="0" class="active"></li>
    	    <li data-target="#carouselExampleIndicators" data-slide-to="1"></li>
    	    <li data-target="#carouselExampleIndicators" data-slide-to="2"></li>
    	  </ol>
    	  <div class="carousel-inner">
    	    <div class="carousel-item active">
    	      <img class="d-block w-100" src="../images/student/main1.png" alt="First slide">
    	    </div>
    	    <div class="carousel-item">
    	      <img class="d-block w-100" src="../images/student/main2.png" alt="Second slide">
    	    </div>
    	    <div class="carousel-item">
    	      <img class="d-block w-100" src="../images/student/main3.png" alt="Third slide">
    	    </div>
    	  </div>
    	  <a class="carousel-control-prev" href="#carouselExampleIndicators" role="button" data-slide="prev">
    	    <span class="carousel-control-prev-icon" aria-hidden="true"></span>
    	    <span class="sr-only">Previous</span>
    	  </a>
    	  <a class="carousel-control-next" href="#carouselExampleIndicators" role="button" data-slide="next">
    	    <span class="carousel-control-next-icon" aria-hidden="true"></span>
    	    <span class="sr-only">Next</span>
    	  </a>
      </div>
 <div class="container mt-4">
  <!-- Example row of columns -->
  <div class="row">
    <div class="col-lg-4">
    <div class="card" style="width: 18rem;">
    <img class="card-img-top" src="../images/student/main4.jpg" alt="Card image cap">
    <div class="card-body">
      <h5 class="card-title">我校学子在第九届服务外包创新创业大赛中荣获团体二、三等奖</h5>
      <p class="card-text">六月的中南林科大艳阳高照，清风习习，绿树成荫。在计算机与信息工程学院黄洪旭、谭云等老师的组织下，由计算机与信息工程学院、林学院、班戈学院等多个学院学生组成的5支参赛队伍，首次参加第九届中国大学生服务外包创新创业大赛，就荣获团体二等奖和三等奖各一项。</p>
      <a href="#" class="btn btn-primary">详细信息</a>
    </div>
  </div>
    </div>
    <div class="col-lg-4">
    <div class="card" style="width: 18rem;">
    <img class="card-img-top" src="../images/student/main5.jpg" alt="Card image cap">
    <div class="card-body">
      <h5 class="card-title">学校召开本科教学工作例会</h5>
      <p class="card-text">7月16日下午，本科教学工作例会在崇德楼（行政楼）四楼3会议室召开，副校长朱道弘主持会议，教务处班子成员，各学院教学副院长及部分教务办主任与会。副校长朱道弘在会上强调了本科教学工作的重要性，肯定了本学期各学院在本科教学工作方面的付出与成绩。对全国本科教学工作大会精神的学习与贯彻进行了深入动员，要求各学院领导班子要带头读懂悟透。</p>
      <a href="#" class="btn btn-primary">详细信息</a>
    </div>
  </div>
    </div>
    <div class="col-lg-4">
    <div class="card" style="width: 18rem;">
    <img class="card-img-top" src="../images/student/main6.jpg" alt="Card image cap">
    <div class="card-body">
      <h5 class="card-title">教务处党支部获评为学校2017-2018年度先进党支部</h5>
      <p class="card-text">学校纪念建党97年暨“七一”表彰大会于6月29日上午在雅韵楼召开,教务处党支部获评为学校2017-2018年度先进党支部。2017-2018年度，教务处支部在学校党委和机关二党委正确领导下，高度重视党建工作，充分发挥党员模范带头作用，全处同志坚持理论学习，狠抓作风建设，牢固树立服务意识，攻坚克难，奋力前行。</p>
      <a href="#" class="btn btn-primary">详细信息</a>
    </div>
  </div>
    </div>
    </div>
  </div>
</div> <!-- /container -->
</div>
    `});

		//个人信息组件
		let personinfo = Vue.component('information', {
			data: function () {
				return {
					s: {},
					prepw: null,
					newpw: null,
					againnewpw: null,
				}
			},
			methods: {
				submit() {
					if (this.newpw === this.againnewpw) {
						axios.post("/stu/uppw", {
							'id': this.s.stuId, 'prePW': this.prepw, 'newPW': this.newpw
						})
							.then((resp) => {
								if (resp.data) { alert("密码修改成功"); }
								else { alert("原密码错误"); }
							})
							.catch((resp) => { console.log("失败") });
					}
					else {
						alert("两次密码不匹配");

					}
				}
			},
			mounted() {
				axios.get("/stu")
					.then((resp) => { this.s = resp.data; })
					.catch((resp) => { console.log("失败") })
			},
			template: `
      <div class="container mt-4">
      <div class="row">
      <div class="col-2">
      <img class="d-block w-100 mt-5" :src="s.stuPic" alt="First slide">
	  </div>
      <div class="col-8">
        <ul>
          <li class="list-group-item ">学号：{{s.stuId}}</li>
          <li class="list-group-item ">姓名：{{s.stuName}}</li>
          <li class="list-group-item ">学院：{{s.stuCollege}}	</li>
          <li class="list-group-item ">专业：{{s.stuMajor}}</li>
          <li class="list-group-item ">班级：{{s.stuClazz}}</li>
          <li class="list-group-item ">籍贯：{{s.stuAddress}}</li>
          <li class="list-group-item ">电话：{{s.stuPhone}}</li>
          <li class="list-group-item ">邮箱：{{s.stuEmail}}</li>
        </ul>
        </div>
        </div>
        <div class="row">
        <div class="col-4 offset-5 offset-4">
        <!-- Button trigger modal -->
        <button type="button" class="btn btn-primary ml-5" data-toggle="modal" data-target="#exampleModal">
          修改密码
        </button>
        </div>
        </div>
        <!-- Modal -->
        <div class="modal fade" id="exampleModal" tabindex="-1" role="dialog" aria-labelledby="exampleModalLabel" aria-hidden="true">
          <div class="modal-dialog" role="document">
            <div class="modal-content">
              <div class="modal-header">
                <h5 class="modal-title" id="exampleModalLabel">修改密码</h5>
                <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                  <span aria-hidden="true">&times;</span>
                </button>
              </div>
              <div class="modal-body">

              <div class="form-group">
              <label for="exampleInputPassword1">原密码</label>
              <input type="password" class="form-control" placeholder="Password" v-model="prepw">
            </div>
              <div class="form-group">
                <label for="exampleInputPassword1">新密码</label>
                <input type="password" class="form-control"  placeholder="Password" v-model="newpw">
              </div>
              <div class="form-group">
              <label for="exampleInputPassword1">再次确认</label>
              <input type="password" class="form-control"  placeholder="Password" v-model="againnewpw">
            </div>
              
              </div>
              <div class="modal-footer">
              <button type="button" class="btn btn-secondary" data-dismiss="modal">关闭</button>
              <button type="button" class="btn btn-primary" data-dismiss="modal" @click="submit">提交</button>
            </div>
            </div>
          </div>
        </div>
      </div>
      `});

		//选课组件
		let choose = Vue.component('choose', {
			data: function () {
				return {
					scs: undefined,
					selected: "",
					tf: false,
				}
			},
			methods: {
				selectCourse() {
					axios.post("stu/allSelectCourse", {
						'time': this.selected
					}).then((resp) => { this.scs = resp.data; this.tf = true; })
						.catch((resp) => { console.log("失败") })
				},
				select() {
					alert("选课成功");
					window.location = '/student.html';
				}
			},
			mounted() {

				this.tf = false;

			},
			template: `
    	  <div class="container mt-4">
    	  <table class="table table-striped" v-if="tf">
    	    <thead>
    	      <tr>
    	        <th scope="col">序号</th>
    	        <th scope="col">课程</th>
    	        <th scope="col">学分</th>
    	        <th scope="col">学时</th>
    	        <th scope="col">性质</th>
    	        <th scope="col">老师</th>
    	        <th scope="col">职称</th>
    	        <th scope="col">学期</th>
    	        <th scope="col">提交</th>
    	      </tr>
    	    </thead>
    	    <tbody>
    	      <tr v-for="(sc,key) in scs" :key="key">
    	        <th scope="row">{{key}}</th>
    	        <td>{{sc.scCourName}}</td>
    	        <td>{{sc.scCourCredit}}</td>
    	        <td>{{sc.scCourPeriod}}</td>
    	        <td>{{sc.scCourNature}}</td>
    	        <td>{{sc.scTeacName}}</td>
    	        <td>{{sc.scTeacTitle}}</td>
    	        <td>{{sc.scSubTime}}</td>
    	        <button class="btn btn-primary mt-1" type="submit" @click="select">选课</button>
    	      </tr>
    	    </tbody>
    	  </table>
    	  <div class="row" v-if="!tf"><div class="col-4 offset-4">
    	    <div class="form-group">
    	      <label for="exampleFormControlSelect1">通过学期查找</label>
    	      <select class="form-control" id="exampleFormControlSelect1" v-model="selected">
    	      <option disabled value="">请选择</option>
    	        <option >第一学期</option>
    	        <option >第二学期</option>
    	        <option >第三学期</option>
    	        <option >第四学期</option>
    	      </select>
    	    </div>
    	    <button class="btn btn-primary" type="submit" @click="selectCourse">查找</button>
    	  </div></div>

    	        </div>
      `})

		//课程表组件
		let timetables = Vue.component('time-tables', {
			data: function () {
				return {
					schedules: undefined,
					selected: "",
					tf: false,
					week: "",
					a:"1",
				}
			},
			methods: {
				sche() {
					axios.post("stu/schedule", {
						'id': this.$route.params.id, 'time': this.selected, 'week': this.week
					}).then((resp) => { this.schedules = resp.data; this.tf = true; })
						.catch((resp) => { console.log("失败") })
				},
				info(day,part){
					axios.post("stu/scheduleInfo", {
						'id': this.$route.params.id, 'time': this.selected, 'week': this.week,'day':day,'part':part
					}).then((resp) => { this.a = resp.data; console.log(resp.data); })
						.catch((resp) => { console.log("失败") })
				}
			},
			mounted() {

				this.tf = false;

			},
			template: `
    	  <div class="container mt-4">
<div class="row"><div class="col-12">
			<table class="table table-hover" v-if="tf">
  <thead>
    <tr>
      <th scope="col">第{{week}}周</th>
      <th scope="col">星期一</th>
      <th scope="col">星期二</th>
      <th scope="col">星期三</th>
			<th scope="col">星期四</th>
      <th scope="col">星期五</th>
      <th scope="col">星期六</th>
			<th scope="col">星期日</th>
    </tr>
  </thead>
  <tbody>
    <tr v-for="(sche,key) in schedules" :key="key">
      <th scope="row" >{{sche.part}}</th>
      <td><button type="button" class="btn  btn-outline-primary" v-if="sche.monday!=null" @click="info(1,sche.part)" data-toggle="modal" data-target="#exampleModal">{{sche.monday}}</button></td>
      <td><button type="button" class="btn  btn-outline-primary" v-if="sche.tuesday!=null"  @click="info(2,sche.part)" data-toggle="modal" data-target="#exampleModal">{{sche.tuesday}}</button></td>
      <td><button type="button" class="btn  btn-outline-primary" v-if="sche.wednesday!=null"  @click="info(3,sche.part)" data-toggle="modal" data-target="#exampleModal">{{sche.wednesday}}</button></td>
	  <td><button type="button" class="btn  btn-outline-primary" v-if="sche.thursday!=null"  @click="info(4,sche.part)" data-toggle="modal" data-target="#exampleModal">{{sche.thursday}}</button></td>
      <td><button type="button" class="btn  btn-outline-primary" v-if="sche.friday!=null"  @click="info(5,sche.part)" data-toggle="modal" data-target="#exampleModal">{{sche.friday}}</button></td>
      <td><button type="button" class="btn  btn-outline-primary" v-if="sche.saturday!=null"  @click="info(6,sche.part)" data-toggle="modal" data-target="#exampleModal">{{sche.saturday}}</button></td>
	  <td><button type="button" class="btn  btn-outline-primary" v-if="sche.sunday!=null"  @click="info(7,sche.part)" data-toggle="modal" data-target="#exampleModal">{{sche.sunday}}</button></td>
    </tr>
  </tbody>
</table>
</div></div>
<!-- Modal -->
<div class="modal fade" id="exampleModal" tabindex="-1" role="dialog" aria-labelledby="exampleModalLabel" aria-hidden="true">
  <div class="modal-dialog" role="document">
    <div class="modal-content">
      <div class="modal-header">
        <h5 class="modal-title" id="exampleModalLabel">{{a.courName}}</h5>
        <button type="button" class="close" data-dismiss="modal" aria-label="Close">
          <span aria-hidden="true">&times;</span>
        </button>
      </div>
      <div class="modal-body">
					<div class="alert alert-light" role="alert">教师：{{a.site}}</div>
					<div class="alert alert-light" role="alert">周数：{{a.week}}</div>
					<div class="alert alert-light" role="alert">节数：{{a.part}}</div>
					<div class="alert alert-light" role="alert">老师：{{a.teacName}}</div>
      </div>
      <div class="modal-footer">
        <button type="button" class="btn btn-primary" data-dismiss="modal">Close</button>
      </div>
    </div>
  </div>
</div>

    	<div class="row" v-if="!tf"><div class="col-4 offset-4">
    	  <div class="form-group">
    	    <label for="exampleFormControlSelect1">学期</label>
    	    <select class="form-control" id="exampleFormControlSelect1" v-model="selected">
    	    <option disabled value="">请选择</option>
    	      <option >第一学期</option>
    	      <option >第二学期</option>
    	      <option >第三学期</option>
    	      <option >第四学期</option>
    	    </select>
    	  </div>
    	  <div class="form-group">
  	    <label for="exampleFormControlSelect1">周数</label>
  	    <select class="form-control" id="exampleFormControlSelect1" v-model="week" >
  	    <option disabled value="">请选择</option>
  	      <option :value="i" v-for="i,index in 30" :key="index">第{{i}}周</option>
  	    </select>
  	  </div>

    	  <button class="btn btn-primary" type="submit" @click="sche">查找</button>
    	</div></div></div>
  `});

		//重修报名组件
		let restudy = Vue.component('restudy', {
			data() {
				return {
					failCourse: [],
					reCourse: [],
				}

			},
			methods: {
				apply() {
					alert("报名成功，请及时缴费");
					window.location = "/student.html";
				},
			},
			mounted() {
				axios.get("stu/failCourse/" + this.$route.params.id)
					.then((resp) => { this.failCourse = resp.data; })
					.catch((resp) => console.log("失败"));
				axios.get("stu/againCourse/" + this.$route.params.id)
					.then((resp) => { this.reCourse = resp.data; })
					.catch((resp) => console.log("失败"));
			},
			template: `
        <div class="container">
    	  <h2 class="mt-3"><span class="badge badge-secondary">挂科情况</span></h2>
    	<table class="table table-striped" >
    	  <thead>
    	    <tr>
    	    <th scope="col">序号</th>
    	      <th scope="col">课程名称</th>
    	      <th scope="col">课程性质</th>
    	      <th scope="col">授课老师</th>
    	      <th scope="col">开课时间</th>
    	      <th scope="col">成绩</th>
    	      <th scope="col">结果</th>
    	    </tr>
    	  </thead>
    	  <tbody>
    	    <tr v-for="(f,key,index) in failCourse" :key="key">
    	    <th scope="row">{{key}}</th>
    	    <td>{{f.courName}}</td>
    	      <td>{{f.courNature}}</td>
    	      <td>{{f.teacName}}</td>
    	      <td>{{f.subTime}}</td>
    	      <td>{{f.score}}</td>
    	      <td class="text-danger">{{f.judge}}</td>
    	    </tr>
    	  </tbody>
    	</table>
    	 <h2 class="mt-3"><span class="badge badge-secondary">未重修课程</span></h2>
     	<table class="table table-striped" >
  	  <thead>
  	    <tr>
  	    <th scope="col">序号</th>
  	      <th scope="col">课程名称</th>
  	      <th scope="col">报名</th>
  	    </tr>
  	  </thead>
  	  <tbody>
  	    <tr v-for="(r,key,index) in reCourse" :key="key">
  	    <th scope="row">{{key}}</th>
  	    <td>{{r}}</td>
  	  <td><button class="btn btn-primary" @click="apply" >报名</button></td>
  	    </tr>
  	  </tbody>
  	</table>

    	</div>
      `});

		//专业课程
		let major = Vue.component('major', {
			data: function () {
				return {
					mcs: undefined,
					selected: "",
					tf: false,
				}
			},
			methods: {
				submit() {
					axios.post("stu/majorCourse", {
						'id': this.$route.params.id, 'time': this.selected
					}).then((resp) => { this.mcs = resp.data; this.tf = true; })
						.catch((resp) => { console.log("失败") })
				},
			},
			mounted() {
				this.tf = false;

			},
			template: `
    	  <div class="container mt-4">
    	  <table class="table table-striped" v-if="tf">
    	    <thead>
    	      <tr>
    	        <th scope="col">序号</th>
    	        <th scope="col">课程</th>
    	        <th scope="col">性质</th>
    	        <th scope="col">学分</th>
    	        <th scope="col">学时</th>
    	        <th scope="col">学期</th>
    	      </tr>
    	    </thead>
    	    <tbody>
    	      <tr v-for="(mc,key) in mcs" :key="key">
    	        <th scope="row">{{key}}</th>
    	        <td>{{mc.mcCourName}}</td>
    	        <td>{{mc.mcCourNature}}</td>
    	        <td>{{mc.mcCourCredit}}</td>
    	        <td>{{mc.mcCourPeriod}}</td>
    	        <td>{{mc.mcSubTime}}</td>
    	      </tr>
    	    </tbody>
    	  </table>
    	  <div class="row" v-if="!tf"><div class="col-4 offset-4">
    	    <div class="form-group">
    	      <label for="exampleFormControlSelect1">通过学期查找</label>
    	      <select class="form-control" id="exampleFormControlSelect1" v-model="selected">
    	      <option disabled value="">请选择</option>
    	        <option >第一学期</option>
    	        <option >第二学期</option>
    	        <option >第三学期</option>
    	        <option >第四学期</option>
    	      </select>
    	    </div>
    	    <button class="btn btn-primary" type="submit" @click="submit">查找</button>
    	  </div></div>
    	        </div>
      `});

		//必修课程
		let main = Vue.component('main', {
			data: function () {
				return {
					mcs: undefined,
					selected: "",
					tf: false,
				}
			},
			methods: {
				submit() {
					axios.post("stu/mainCourse", {
						'id': this.$route.params.id, 'time': this.selected
					}).then((resp) => { this.mcs = resp.data; this.tf = true; })
						.catch((resp) => { console.log("失败") })
				},
			},
			mounted() {
				this.tf = false;

			},
			template: `
    	  <div class="container mt-4">
    	  <table class="table table-striped" v-if="tf">
    	    <thead>
    	      <tr>
    	        <th scope="col">序号</th>
    	        <th scope="col">课程</th>
    	        <th scope="col">性质</th>
    	        <th scope="col">学分</th>
    	        <th scope="col">学时</th>
    	        <th scope="col">学期</th>
    	        <th scope="col">老师</th>
    	        <th scope="col">职称</th>
    	      </tr>
    	    </thead>
    	    <tbody>
    	      <tr v-for="(mc,key) in mcs" :key="key">
    	        <th scope="row">{{key}}</th>
    	        <td>{{mc.mcCourName}}</td>
    	        <td>{{mc.mcCourNature}}</td>
    	        <td>{{mc.mcCourCredit}}</td>
    	        <td>{{mc.mcCourPeriod}}</td>
    	        <td>{{mc.mcSubTime}}</td>
    	        <td>{{mc.mcTeacName}}</td>
    	        <td>{{mc.mcTeacTitle}}</td>
    	      </tr>
    	    </tbody>
    	  </table>
    	  <div class="row" v-if="!tf"><div class="col-4 offset-4">
    	    <div class="form-group">
    	      <label for="exampleFormControlSelect1">通过学期查找</label>
    	      <select class="form-control" id="exampleFormControlSelect1" v-model="selected">
    	      <option disabled value="">请选择</option>
    	        <option >第一学期</option>
    	        <option >第二学期</option>
    	        <option >第三学期</option>
    	        <option >第四学期</option>
    	      </select>
    	    </div>
    	    <button class="btn btn-primary" type="submit" @click="submit">查找</button>
    	  </div></div>
    	        </div>
      `})

		//选修课程
		let selec = Vue.component('selec', {
			data: function () {
				return {
					scs: undefined,
					selected: "",
					tf: false,
				}
			},
			methods: {
				submit() {
					axios.post("stu/selectCourse", {
						'id': this.$route.params.id, 'time': this.selected
					}).then((resp) => { this.scs = resp.data; this.tf = true; })
						.catch((resp) => { console.log("失败") })
				},
			},
			mounted() {
				this.tf = false;

			},
			template: `
    	  <div class="container mt-4">
    	  <table class="table table-striped" v-if="tf">
    	    <thead>
    	      <tr>
    	        <th scope="col">序号</th>
    	        <th scope="col">课程</th>
    	        <th scope="col">性质</th>
    	        <th scope="col">学分</th>
    	        <th scope="col">学时</th>
    	        <th scope="col">学期</th>
    	        <th scope="col">老师</th>
    	        <th scope="col">职称</th>
    	      </tr>
    	    </thead>
    	    <tbody>
    	      <tr v-for="(sc,key) in scs" :key="key">
    	        <th scope="row">{{key}}</th>
    	        <td>{{sc.scCourName}}</td>
    	        <td>{{sc.scCourNature}}</td>
    	        <td>{{sc.scCourCredit}}</td>
    	        <td>{{sc.scCourPeriod}}</td>
    	        <td>{{sc.scSubTime}}</td>
    	        <td>{{sc.scTeacName}}</td>
    	        <td>{{sc.scTeacTitle}}</td>
    	      </tr>
    	    </tbody>
    	  </table>
    	  <div class="row" v-if="!tf"><div class="col-4 offset-4">
    	    <div class="form-group">
    	      <label for="exampleFormControlSelect1">通过学期查找</label>
    	      <select class="form-control" id="exampleFormControlSelect1" v-model="selected">
    	      <option disabled value="">请选择</option>
    	        <option >第一学期</option>
    	        <option >第二学期</option>
    	        <option >第三学期</option>
    	        <option >第四学期</option>
    	      </select>
    	    </div>
    	    <button class="btn btn-primary" type="submit" @click="submit">查找</button>
    	  </div></div>
    	        </div>
      `})

		//成绩组件
		let score = Vue.component('score-test', {

			data: function () {
				return {
					grades: undefined,
					selected: "",
					tf: false,
				}
			},
			methods: {
				gradeByTime() {
					axios.post("stu/grade", {
						'id': this.$route.params.id, 'time': this.selected
					}).then((resp) => { this.grades = resp.data; this.tf = true; })
						.catch((resp) => { console.log("失败") })
				},
			},
			mounted() {

				this.tf = false;

			},
			template: `
      <div class="container mt-4">
<table class="table table-striped" v-if="tf">
  <thead>
    <tr>
      <th scope="col">序号</th>
      <th scope="col">课程名称</th>
      <th scope="col">课程性质</th>
      <th scope="col">授课老师</th>
      <th scope="col">开课时间</th>
      <th scope="col">学分</th>
      <th scope="col">成绩</th>
      <th scope="col">绩点</th>
      <th scope="col">过否</th>
    </tr>
  </thead>
  <tbody>
    <tr v-for="(grade,key) in grades" :key="key">
      <th scope="row">{{key}}</th>
      <td>{{grade.courName}}</td>
      <td>{{grade.courNature}}</td>
      <td>{{grade.teacName}}</td>
      <td>{{grade.subTime}}</td>
      <td>{{grade.courCredit}}</td>
      <td>{{grade.score}}</td>
      <td>{{grade.point}}</td>
      <td v-bind:class="[grade.judge=='没过' ? 'text-danger' : '',grade.judge=='重修过' ? 'text-danger' : '']" >{{grade.judge}}</td>
    </tr>
  </tbody>
</table>
<div class="row" v-if="!tf"><div class="col-4 offset-4">
  <div class="form-group">
    <label for="exampleFormControlSelect1">通过学期查找</label>
    <select class="form-control" id="exampleFormControlSelect1" v-model="selected">
    <option disabled value="">请选择</option>
      <option >第一学期</option>
      <option >第二学期</option>
      <option >第三学期</option>
      <option >第四学期</option>
    </select>
  </div>
  <button class="btn btn-primary" type="submit" @click="gradeByTime">查找</button>
</div></div>

      </div>
      `});

		//班级排名
		let classRank = Vue.component('rank-class', {

			data: function () {
				return {
					ranks: {},
					tf: false,
					selected: ""
				}
			},
			methods: {
				classRank() {
					axios.post("stu/classRank", {
						'id': this.$route.params.id, 'time': this.selected
					}).then((resp) => { this.ranks = resp.data; this.tf = true; })
						.catch((resp) => { console.log("失败") })
				}
			},
			mounted() {

			},
			template: `
      <div class="container mt-4">
    	  <table class="table table-striped" v-if="tf">
    	  <thead>
  	    <tr>
  	      <th scope="col">班级排名</th>
  	      <th scope="col">总分（绩点×学分）</th>
  	      <th scope="col">学期</th>
  	    <th scope="col">届</th>
  	    </tr>
  	  </thead>
  	  <tbody>
  	    <tr >
  	      <td>{{ranks.rank}}</td>
  	      <td>{{ranks.sum}}</td>
  	      <td>{{ranks.subTime}}</td>
  	    <td>{{ranks.period}}</td>
  	    </tr>
  	  </tbody>
  	</table>

    	  <div class="row" v-if="!tf"><div class="col-4 offset-4">
    	  <div class="form-group">
    	    <label for="exampleFormControlSelect1">通过学期查找</label>
    	    <select class="form-control" id="exampleFormControlSelect1" v-model="selected">
    	    <option disabled value="">请选择</option>
    	      <option >第一学期</option>
    	      <option >第二学期</option>
    	      <option >第三学期</option>
    	      <option >第四学期</option>
    	    </select>
    	  </div>
    	  <button class="btn btn-primary" type="submit" @click="classRank">查找</button>
    	</div></div>

      </div>
      `});

		//专业排名
		let majorRank = Vue.component('rank-major', {

			data: function () {
				return {
					ranks: {},
					tf: false,
					selected: ""
				}
			},
			methods: {
				majorRank() {
					axios.post("stu/majorRank", {
						'id': this.$route.params.id, 'time': this.selected
					}).then((resp) => { this.ranks = resp.data; this.tf = true; })
						.catch((resp) => { console.log("失败") })
				}
			},
			mounted() {

			},
			template: `
      <div class="container mt-4">
    	  <table class="table table-striped" v-if="tf">
    	  <thead>
  	    <tr>
  	      <th scope="col">专业排名</th>
  	      <th scope="col">总分（绩点×学分）</th>
  	      <th scope="col">学期</th>
  	    <th scope="col">届</th>
  	    </tr>
  	  </thead>
  	  <tbody>
  	    <tr >
  	      <td>{{ranks.rank}}</td>
  	      <td>{{ranks.sum}}</td>
  	      <td>{{ranks.subTime}}</td>
  	    <td>{{ranks.period}}</td>
  	    </tr>
  	  </tbody>
  	</table>

    	  <div class="row" v-if="!tf"><div class="col-4 offset-4">
    	  <div class="form-group">
    	    <label for="exampleFormControlSelect1">通过学期查找</label>
    	    <select class="form-control" id="exampleFormControlSelect1" v-model="selected">
    	    <option disabled value="">请选择</option>
    	      <option >第一学期</option>
    	      <option >第二学期</option>
    	      <option >第三学期</option>
    	      <option >第四学期</option>
    	    </select>
    	  </div>
    	  <button class="btn btn-primary" type="submit" @click="majorRank">查找</button>
    	</div></div>

      </div>
      `});

		//定义路由路径
		const routes = [
			//首页
			{ path: '*', component: firstpage },

			//个人信息
			{ path: '/personinfo', component: personinfo },

			//学生选课
			{ path: '/choose', component: choose },

			//查询课表
			{ path: '/timetables/:id', component: timetables },

			//重修报名
			{ path: '/restudy/:id', component: restudy },

			//专业课程
			{ path: '/major/:id', component: major },

			//主修课程
			{ path: '/main/:id', component: main },

			//选修课程
			{ path: '/selec/:id', component: selec },

			//查成绩
			{ path: '/score/:id', component: score },

			//班级排名
			{ path: '/classRank/:id', component: classRank },

			//专业排名
			{ path: '/majorRank/:id', component: majorRank }
		];

		//加载路由
		const router = new VueRouter({
			routes
		});

		//启动路由
		const app = new Vue({
			el: '#student',
			data: {
				student: {},
			},
			methods: {
			},
			mounted() {
				axios.get("/stu")
					.then((resp) => { this.student = resp.data; })
					.catch((resp) => { console.log("失败") })
			},
			router
		});
	</script>

	<script src="https://code.jquery.com/jquery-3.3.1.slim.min.js" integrity="sha384-q8i/X+965DzO0rT7abK41JStQIAqVgRVzpbzo5smXKp4YfRvH+8abtTE1Pi6jizo"
	 crossorigin="anonymous"></script>
	<script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.14.3/umd/popper.min.js" integrity="sha384-ZMP7rVo3mIykV+2+9J3UJ46jBk0WLaUAdn689aCwoqbBJiSnjAK/l8WvCWPIPm49"
	 crossorigin="anonymous"></script>
	<script src="https://stackpath.bootstrapcdn.com/bootstrap/4.1.3/js/bootstrap.min.js" integrity="sha384-ChfqqxuZUCnJSK3+MXmPNIyE6ZbWh2IMqE241rYiqJxyMiZ6OW/JmZQ5stwEULTy"
	 crossorigin="anonymous"></script>
</body>

</html>