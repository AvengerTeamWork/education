<!DOCTYPE html>
<html>

<head>
  <meta charset="utf-8" />
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <title>学生</title>
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <script src="https://cdn.bootcss.com/vue/2.4.2/vue.min.js"></script>
  <script src="https://cdn.bootcss.com/vue-router/2.7.0/vue-router.min.js"></script>
  <!-- Bootstrap core CSS -->
  <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.1.3/css/bootstrap.min.css" integrity="sha384-MCw98/SFnGE8fJT3GXwEOngsV7Zt27NXFoaoApmYm81iuXoPkFOJwJ8ERdknLPMO"
    crossorigin="anonymous">
  <!-- axios -->
  <script src="https://unpkg.com/axios/dist/axios.min.js"></script>
</head>

<body>
  <div id="student">
    <cnav :s=student></cnav>
    <router-view></router-view>
    <cfooter></cfooter>
  </div>




  <script>
    //nav
    Vue.component('cnav', {
      props: ["s"],
      template: `
			<nav class="navbar navbar-expand-lg navbar-light bg-white shadow-sm">
			<a class="navbar-brand" href="#"><img
				src="../images/student/logo.png" width="200" height="60"
				class="d-inline-block align-top" alt="#"></a>
			<button class="navbar-toggler" type="button" data-toggle="collapse"
				data-target="#navbarSupportedContent"
				aria-controls="navbarSupportedContent" aria-expanded="false"
				aria-label="Toggle navigation">
				<span class="navbar-toggler-icon"></span>
			</button>
			<div class="collapse navbar-collapse" id="navbarSupportedContent">
				<ul class="navbar-nav mr-auto mt-2 mt-lg-0">
					<li class="nav-item"><a class="nav-link text-dark" href="#">首页</a></li>
					<li class="nav-item"><a class="nav-link text-dark"
						href="student.html#/personinfo">个人信息</a></li>
					<li class="nav-item"><a class="nav-link text-dark"
						href="student.html#/choose">学生选课</a></li>
					<li class="nav-item"><a class="nav-link text-dark"
						href="student.html#/timetables">课表查询</a></li>
					<li class="nav-item"><a class="nav-link text-dark"
						href="student.html#/restudy">重修报名</a></li>
					<li class="nav-item"><a class="nav-link text-dark" href="#">课程查询</a></li>
					<li class="nav-item dropdown"><a
						class="nav-link dropdown-toggle text-dark" href="#" id="navbarDropdown"
						role="button" data-toggle="dropdown" aria-haspopup="true"
						aria-expanded="false"> 成绩查询 </a>
						<div class="dropdown-menu"
							aria-labelledby="navbarDropdownMenuLink">
							<a class="dropdown-item" :href="'student.html#/score/'+s.stuId">个人成绩</a>
							<div class="dropdown-divider"></div>
							<a class="dropdown-item" href="#">班级排名</a>
							<div class="dropdown-divider"></div>
							<a class="dropdown-item" href="#">专业排名</a>
						</div></li>
				</ul>
				<a class="text-dark " href="/">{{s.stuName}}({{s.stuId}})，退出</a>
			</div>
		</nav>
		`
    })

    //footer
    Vue.component('cfooter', {
      template: `
			<div class="container mt-4">
			<footer class="pt-4 mt-md-5 pt-md-5 border-top">
				<div class="row">
					<div class="col-12 col-md">
						<img class="mb-2" src="../images/student/code.png" alt="">
						<small class="d-block mb-3 text-muted">&copy; 中南林科大新闻网</small>
					</div>
					<div class="col-6 col-md">
						<ul class="list-unstyled text-small">
							<li><a class="text-muted">地址：湖南省长沙市韶山南路498号</a></li>
							<li><a class="text-muted"> 邮编：410004</a></li>
							<li><a class="text-muted">电话：0731-85623096</a></li>
						</ul>
					</div>
					<div class="col-6 col-md">
						<ul class="list-unstyled text-small">
							<li><a class="text-muted">中南林业科技大学教务处版权所有</a></li>
							<li><a class="text-muted">湘ICP备09017705号</a></li>
							<li><a class="text-muted">湘教Q4_201212_010022</a></li>
						</ul>
					</div>
					<div class="col-6 col-md">
						<ul class="list-unstyled text-small">
							<li><a class="text-muted"
								href="http://www.hep.com.cn/service/xuanshu">高教出版社产品信息检索</a></li>
							<li><a class="text-muted" href="http://www.moe.edu.cn/">国家教育部</a></li>
							<li><a class="text-muted" href="http://www.csuft.edu.cn">中南林业科技大学</a></li>
							<li><a class="text-muted" href="http://zjc.csuft.edu.cn/f">中南林业科技大学招生网</a></li>
						</ul>
					</div>
				</div>
			</footer>
		</div>
		`
    })


    //首页组件
    let firstpage = Vue.component("main", {
      template: `
		<div>
    	  <div id="carouselExampleIndicators" class="carousel slide" data-ride="carousel">
    	  <ol class="carousel-indicators">
    	    <li data-target="#carouselExampleIndicators" data-slide-to="0" class="active"></li>
    	    <li data-target="#carouselExampleIndicators" data-slide-to="1"></li>
    	    <li data-target="#carouselExampleIndicators" data-slide-to="2"></li>
    	  </ol>
    	  <div class="carousel-inner">
    	    <div class="carousel-item active">
    	      <img class="d-block w-100" src="../images/student/main1.png" alt="First slide">
    	    </div>
    	    <div class="carousel-item">
    	      <img class="d-block w-100" src="../images/student/main2.png" alt="Second slide">
    	    </div>
    	    <div class="carousel-item">
    	      <img class="d-block w-100" src="../images/student/main3.png" alt="Third slide">
    	    </div>
    	  </div>
    	  <a class="carousel-control-prev" href="#carouselExampleIndicators" role="button" data-slide="prev">
    	    <span class="carousel-control-prev-icon" aria-hidden="true"></span>
    	    <span class="sr-only">Previous</span>
    	  </a>
    	  <a class="carousel-control-next" href="#carouselExampleIndicators" role="button" data-slide="next">
    	    <span class="carousel-control-next-icon" aria-hidden="true"></span>
    	    <span class="sr-only">Next</span>
    	  </a>
      </div>
 <div class="container mt-4">
  <!-- Example row of columns -->
  <div class="row">
    <div class="col-lg-4">
    <div class="card" style="width: 18rem;">
    <img class="card-img-top" src="../images/student/main4.jpg" alt="Card image cap">
    <div class="card-body">
      <h5 class="card-title">我校学子在第九届服务外包创新创业大赛中荣获团体二、三等奖</h5>
      <p class="card-text">六月的中南林科大艳阳高照，清风习习，绿树成荫。在计算机与信息工程学院黄洪旭、谭云等老师的组织下，由计算机与信息工程学院、林学院、班戈学院等多个学院学生组成的5支参赛队伍，首次参加第九届中国大学生服务外包创新创业大赛，就荣获团体二等奖和三等奖各一项。</p>
      <a href="#" class="btn btn-primary">详细信息</a>
    </div>
  </div>
    </div>
    <div class="col-lg-4">
    <div class="card" style="width: 18rem;">
    <img class="card-img-top" src="../images/student/main5.jpg" alt="Card image cap">
    <div class="card-body">
      <h5 class="card-title">学校召开本科教学工作例会</h5>
      <p class="card-text">7月16日下午，本科教学工作例会在崇德楼（行政楼）四楼3会议室召开，副校长朱道弘主持会议，教务处班子成员，各学院教学副院长及部分教务办主任与会。副校长朱道弘在会上强调了本科教学工作的重要性，肯定了本学期各学院在本科教学工作方面的付出与成绩。对全国本科教学工作大会精神的学习与贯彻进行了深入动员，要求各学院领导班子要带头读懂悟透。</p>
      <a href="#" class="btn btn-primary">详细信息</a>
    </div>
  </div>
    </div>
    <div class="col-lg-4">
    <div class="card" style="width: 18rem;">
    <img class="card-img-top" src="../images/student/main6.jpg" alt="Card image cap">
    <div class="card-body">
      <h5 class="card-title">教务处党支部获评为学校2017-2018年度先进党支部</h5>
      <p class="card-text">学校纪念建党97年暨“七一”表彰大会于6月29日上午在雅韵楼召开,教务处党支部获评为学校2017-2018年度先进党支部。2017-2018年度，教务处支部在学校党委和机关二党委正确领导下，高度重视党建工作，充分发挥党员模范带头作用，全处同志坚持理论学习，狠抓作风建设，牢固树立服务意识，攻坚克难，奋力前行。</p>
      <a href="#" class="btn btn-primary">详细信息</a>
    </div>
  </div>
    </div>
    </div>
  </div>
</div> <!-- /container -->
</div>
    `});

    //课程表组件
    let timetables = Vue.component('timetables', {
      template: `
      <div class="table-responsive">
        <ul class="nav justify-content-center">
          <li class="nav-item">
            <router-link to="/timetables/personal"><img src="./images/personal.jpg" style="width:20;height:20px">个人课表</router-link>
          </li>
          <li class="nav-item">
            <p>------</p>
          </li>
          <li class="nav-item">
            <router-link to="/timetables/major"><img src="./images/clazz.jpg" style="width:20;height:20px">专业课表</router-link>
          </li>
        </ul>        
          <router-view></router-view>
      </div>

  `});

    //个人课表
    let personal = Vue.component('timetables-personal', {
      template: `
<table class="table text-center">
  <thead>
    <tr>
      <th scope="col">时间</th>
      <th scope="col">星期一</th>
      <th scope="col">星期二</th>
      <th scope="col">星期三</th>
      <th scope="col">星期四</th>
      <th scope="col">星期五</th>
      <th scope="col">星期六</th>
      <th scope="col">星期天</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th scope="row">1-2</th>
      <td>Mark</td>
      <td>Otto</td>
      <td>@mdo</td>
      <td>Larry</td>
      <td>the Bird</td>
      <td>@twitter</td>
      <td>Larry</td>
    </tr>
    <tr>
      <th scope="row">3-4</th>
      <td>Jacob</td>
      <td>Thornton</td>
      <td>@fat</td>
      <td>Larry</td>
      <td>the Bird</td>
      <td>@twitter</td>
      <td>Larry</td>
    </tr>
    <tr>
      <th scope="row">5-6</th>
      <td>Larry</td>
      <td>the Bird</td>
      <td>@twitter</td>
      <td>Larry</td>
      <td>the Bird</td>
      <td>@twitter</td>
      <td>Larry</td>
    </tr>
    <tr>
      <th scope="row">7-8</th>
      <td>Larry</td>
      <td>the Bird</td>
      <td>@twitter</td>
      <td>Larry</td>
      <td>the Bird</td>
      <td>@twitter</td>
      <td>Larry</td>
    </tr>
    <tr>
      <th scope="row">9-10</th>
      <td>Larry</td>
      <td>the Bird</td>
      <td>@twitter</td>
      <td>Larry</td>
      <td>the Bird</td>
      <td>@twitter</td>
      <td>Larry</td>
    </tr>
  </tbody>
</table>
  `});

    //专业课表
    let major = Vue.component('timetables-major', {
      template: `
<table class="table text-center">
  <thead>
    <tr>
      <th scope="col">时间</th>
      <th scope="col">星期一</th>
      <th scope="col">星期二</th>
      <th scope="col">星期三</th>
      <th scope="col">星期四</th>
      <th scope="col">星期五</th>
      <th scope="col">星期六</th>
      <th scope="col">星期天</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th scope="row">1-2</th>
      <td>Mark</td>
      <td>Otto</td>
      <td>@mdo</td>
      <td>Larry</td>
      <td>the Bird</td>
      <td>@twitter</td>
      <td>Larry</td>
    </tr>
    <tr>
      <th scope="row">3-4</th>
      <td>Jacob</td>
      <td>Thornton</td>
      <td>@fat</td>
      <td>Larry</td>
      <td>the Bird</td>
      <td>@twitter</td>
      <td>Larry</td>
    </tr>
    <tr>
      <th scope="row">5-6</th>
      <td>Larry</td>
      <td>the Bird</td>
      <td>@twitter</td>
      <td>Larry</td>
      <td>the Bird</td>
      <td>@twitter</td>
      <td>Larry</td>
    </tr>
    <tr>
      <th scope="row">7-8</th>
      <td>Larry</td>
      <td>the Bird</td>
      <td>@twitter</td>
      <td>Larry</td>
      <td>the Bird</td>
      <td>@twitter</td>
      <td>Larry</td>
    </tr>
    <tr>
      <th scope="row">9-10</th>
      <td>Larry</td>
      <td>the Bird</td>
      <td>@twitter</td>
      <td>Larry</td>
      <td>the Bird</td>
      <td>@twitter</td>
      <td>Larry</td>
    </tr>
  </tbody>
</table>
  `});

    //选课组件
    let choose = Vue.component('choose', {
      template: `
         <div><h1>选课</h1></div>
      `})

    //调课组件
    let cover = Vue.component('cover', {
      template: `
         <div><h1>调课组件</h1></div>
      `})



    //个人信息组件
    let personinfo = Vue.component('information', {
      data: function () {
        return {
          s: {},
        }
      },
      mounted() {
        axios.get("/stu")
          .then((resp) => { this.s = resp.data; })
          .catch((resp) => { console.log("失败") })
      },
      template: `
      <div class="container mt-4">
      <div class="row">
      <div class="col-2">
      <img class="d-block w-100 mt-5" :src="s.stuPic" alt="First slide">
	  </div>
      <div class="col-8">
        <ul>
          <li class="list-group-item ">学号：{{s.stuId}}</li>
          <li class="list-group-item ">姓名：{{s.stuName}}</li>
          <li class="list-group-item ">学院：{{s.stuCollege}}	</li>
          <li class="list-group-item ">专业：{{s.stuMajor}}</li>
          <li class="list-group-item ">班级：{{s.stuClazz}}</li>
          <li class="list-group-item ">籍贯：{{s.stuAddress}}</li>
          <li class="list-group-item ">电话：{{s.stuPhone}}</li>
          <li class="list-group-item ">邮箱：{{s.stuEmail}}</li>
        </ul>
        
        </div>
        </div>
      </div>
      `});

    //成绩组件
    let score = Vue.component('score-test', {

      data: function () {
        return {
          grades: undefined,
          selected: "",
          totalPage: 5,
          page: undefined,
        }
      },
      methods: {
        jumpPage(page) {
          // axios.get('/staff?p=' + page)
          //   .then((response) => {
          //     this.staffList = response.data.staff;
          //     this.page = response.data.page;
          //     console.log(this.totalPage);
          //   })
          //   .catch((error) => console.log(error));
        },
        jumpPre() {
          // axios.get('/staff?p=' + this.pre)
          //   .then((response) => {
          //     this.staffList = response.data.staff;
          //     this.page = response.data.page;
          //     console.log(this.totalPage);
          //   })
          //   .catch((error) => console.log(error));
        },
        jumpNex() {
          // axios.get('/staff?p=' + this.nex)
          //   .then((response) => {
          //     this.staffList = response.data.staff;
          //     this.page = response.data.page;
          //     console.log(this.totalPage);
          //   })
          //   .catch((error) => console.log(error));
        },
        gradeByTime() {
          axios.post("stu/gradeByTime", {
            'id': this.$route.params.id, 'time': this.selected
          }).then((resp) => { this.grades = resp.data; })
            .catch((resp) => { console.log("失败") })
        },
      },
      mounted() {
        axios.get("/stu/grade/" + this.$route.params.id)
          .then((resp) => { this.grades = resp.data; })
          .catch((resp) => { console.log("失败") })
      },
      template: `
      <div class="container mt-4">
<table class="table table-striped">
  <thead>
    <tr>
      <th scope="col">序号</th>
      <th scope="col">课程名称</th>
      <th scope="col">课程性质</th>
      <th scope="col">授课老师</th>
      <th scope="col">开课时间</th>
      <th scope="col">学分</th>
      <th scope="col">成绩</th>
      <th scope="col">绩点</th>
      <th scope="col">过否</th>
    </tr>
  </thead>
  <tbody>
    <tr v-for="(grade,key) in grades" :key="key">
      <th scope="row">{{key}}</th>
      <td>{{grade.courName}}</td>
      <td>{{grade.courNature}}</td>
      <td>{{grade.teacName}}</td>
      <td>{{grade.subTime}}</td>
      <td>{{grade.courCredit}}</td>
      <td>{{grade.score}}</td>
      <td>{{grade.point}}</td>
      <td>{{grade.judge}}</td>
    </tr>
  </tbody>
</table>
<!-- 页码 -->
				<nav aria-label="Page navigation example">
					<ul class="pagination justify-content-center  text-info">
						<li class="page-item" v-bind:class="[page==1 ? 'disabled' : '']"><a
							class="page-link" @click="jumpPre()">Previous</a></li>
						<li class="page-item " v-for="(page, index) in totalPage"
							:key="index"><a class="page-link" @click="jumpPage(page)">{{page}}</a></li>
						<li class="page-item"
							v-bind:class="[page==totalPage ? 'disabled' : '']"><a
							class="page-link" @click="jumpNex()">Next</a></li>
					</ul>
				</nav>
<div class="row"><div class="col-3">

  <div class="form-group">
    <label for="exampleFormControlSelect1">通过学期查找</label>
    <select class="form-control" id="exampleFormControlSelect1" v-model="selected">
    <option disabled value="">请选择</option>
      <option >第一学期</option>
      <option >第二学期</option>
      <option >第三学期</option>
      <option >第四学期</option>
    </select>
  </div>
  <button class="btn btn-primary" type="submit" @click="gradeByTime">查找</button>
</div></div>

      </div>
      `});
    //等级考试报名组件
    let leveltest = Vue.component('leveltest', {
      template: `
         <div><h1>等级考试报名</h1></div>
      `});
    //重修报名组件
    let restudy = Vue.component('restudy', {
      template: `
        <div><h1>重修报名</h1></div>
      `});
    //定义路由路径
    let a = 1;

    const routes = [
      //首页
      { path: '*', component: firstpage },
      //个人信息
      { path: '/personinfo', component: personinfo },
      //选课
      { path: '/choose', component: choose },
      //调课
      { path: '/cover', component: cover },
      //等级考试报名
      { path: '/leveltest', component: leveltest },
      //重修报名
      { path: '/restudy', component: restudy },
      //查询课表
      {
        path: '/timetables', component: timetables,
        children: [
          { path: 'personal', component: personal },
          { path: 'major', component: major }
        ]
      },
      //查成绩
      { path: '/score/:id', component: score }
    ];
    //加载路由
    const router = new VueRouter({
      routes
    });


    //启动路由
    const app = new Vue({
      el: '#student',
      data: {
        student: {},
        yi: 1
      },
      methods: {
      },
      mounted() {
        axios.get("/stu")
          .then((resp) => { this.student = resp.data; })
          .catch((resp) => { console.log("失败") })
      },

      router
    });
  </script>

  <script src="https://code.jquery.com/jquery-3.3.1.slim.min.js" integrity="sha384-q8i/X+965DzO0rT7abK41JStQIAqVgRVzpbzo5smXKp4YfRvH+8abtTE1Pi6jizo"
    crossorigin="anonymous"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.14.3/umd/popper.min.js" integrity="sha384-ZMP7rVo3mIykV+2+9J3UJ46jBk0WLaUAdn689aCwoqbBJiSnjAK/l8WvCWPIPm49"
    crossorigin="anonymous"></script>
  <script src="https://stackpath.bootstrapcdn.com/bootstrap/4.1.3/js/bootstrap.min.js" integrity="sha384-ChfqqxuZUCnJSK3+MXmPNIyE6ZbWh2IMqE241rYiqJxyMiZ6OW/JmZQ5stwEULTy"
    crossorigin="anonymous"></script>
</body>

</html>